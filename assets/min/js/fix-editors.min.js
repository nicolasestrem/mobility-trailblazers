/***Fix WordPress Editors on Candidate Edit Page**@package MobilityTrailblazers*@since 2.5.37*/(function($){'use strict'; function fixBrokenEditors(){if(!$('body').hasClass('post-type-mt_candidate')){return;}if(typeof tinymce==='undefined' || typeof wp==='undefined' || !wp.editor){console.log('Editor libraries not ready, retrying...'); setTimeout(fixBrokenEditors, 500); return;}var postId=$('#post_ID').val(); var criteriaEditorId=postId ? 'mt_criteria_editor_'+postId : 'mt_evaluation_criteria'; var overviewEditorId='mt_overview'; function initializeEditorIfBroken(editorId){var $textarea=$('#'+editorId); if($textarea.length===0){return;}var editor=tinymce.get(editorId); if(!editor || !editor.initialized || $('#'+editorId+'_ifr').length===0){console.log('Fixing broken editor: '+editorId); if(editor){tinymce.remove('#'+editorId); wp.editor.remove(editorId);}var settings={tinymce:{wpautop: true, plugins: 'charmap,colorpicker,hr,lists,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpautoresize,wpeditimage,wpemoji,wpgallery,wplink,wpdialogs,wptextpattern,wpview', toolbar1: 'formatselect,bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,fullscreen,wp_adv', toolbar2: 'underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help', toolbar3: '', toolbar4: '', tabfocus_elements: 'content-html,save-post', height:(editorId===criteriaEditorId)? 400 : 300}, quicktags: true, mediaButtons:(editorId===overviewEditorId)}; wp.editor.initialize(editorId, settings); setTimeout(function(){var newEditor=tinymce.get(editorId); if(newEditor && $textarea.val()){newEditor.setContent($textarea.val());}}, 500);}}initializeEditorIfBroken(overviewEditorId); initializeEditorIfBroken(criteriaEditorId);}$(document).ready(function(){if(typeof pagenow !=='undefined' && pagenow==='mt_candidate'){setTimeout(fixBrokenEditors, 1000);}}); $(window).on('load', function(){if($('body').hasClass('post-type-mt_candidate')){setTimeout(fixBrokenEditors, 1500);}});})(jQuery);
