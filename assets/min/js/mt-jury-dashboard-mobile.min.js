!function($){"use strict";const isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)||navigator.userAgent.match(/WPDesktop/i)},any:function(){return isMobile.Android()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};const touchHandler={startX:0,startY:0,endX:0,endY:0,handleStart:function(e){const touch=e.touches[0];this.startX=touch.clientX;this.startY=touch.clientY},handleEnd:function(e,callback){const touch=e.changedTouches[0];this.endX=touch.clientX;this.endY=touch.clientY;const diffX=this.endX-this.startX;const diffY=this.endY-this.startY;if(Math.abs(diffX)>Math.abs(diffY)){if(Math.abs(diffX)>50){if(diffX>0){callback("right")}else{callback("left")}}}}};function initMobileFeatures(){if(isMobile.any()){$("body").addClass("mt-is-mobile")}setViewportHeight();$(window).on("resize orientationchange",setViewportHeight);addTouchFeedback();initSwipeNavigation();optimizeTableScroll();initPullToRefresh();enhanceMobileFilters();if(isMobile.iOS()){fixIOSInputZoom()}initLazyLoading();initSmoothScroll()}function setViewportHeight(){const vh=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${vh}px`)}function addTouchFeedback(){const touchElements=".mt-evaluate-btn, .mt-stat-card, .mt-candidate-card, .mt-ranking-item";$(touchElements).on("touchstart",function(){$(this).addClass("mt-touch-active")}).on("touchend touchcancel",function(){$(this).removeClass("mt-touch-active")})}function initSwipeNavigation(){let currentCardIndex=0;const $cards=$(".mt-candidate-card:visible");if($cards.length===0)return;$cards.each(function(index){const $card=$(this);$card.on("touchstart",function(e){touchHandler.handleStart(e.originalEvent)});$card.on("touchend",function(e){touchHandler.handleEnd(e.originalEvent,function(direction){if(direction==="left"){showCardDetails($card)}else if(direction==="right"){hideCardDetails($card)}})})})}function showCardDetails($card){$card.addClass("mt-card-expanded");if(!$card.find(".mt-card-close").length){$card.prepend('<button class="mt-card-close" aria-label="'+mt_frontend.i18n.close+'">Ã—</button>')}$card.find(".mt-card-close").on("click",function(e){e.stopPropagation();hideCardDetails($card)})}function hideCardDetails($card){$card.removeClass("mt-card-expanded")}function optimizeTableScroll(){const $tableWrap=$(".mt-evaluation-table-wrap");if($tableWrap.length===0)return;$tableWrap.each(function(){const $wrap=$(this);const $table=$wrap.find(".mt-evaluation-table");if($table.width()>$wrap.width()){$wrap.addClass("mt-has-scroll");if(!$wrap.find(".mt-scroll-hint").length){$wrap.append('<div class="mt-scroll-hint">'+'<span class="dashicons dashicons-arrow-right-alt"></span> '+mt_frontend.i18n.scroll_for_more+"</div>")}$wrap.on("scroll",function(){if($(this).scrollLeft()>10){$(this).find(".mt-scroll-hint").fadeOut()}})}})}function initPullToRefresh(){if(!isMobile.any())return;let pullStartY=0;let pullMoveY=0;const pullThreshold=80;const $refreshIndicator=$('<div class="mt-pull-refresh">'+'<span class="dashicons dashicons-update"></span>'+"</div>").appendTo("body");$(document).on("touchstart",function(e){if($(window).scrollTop()===0){pullStartY=e.originalEvent.touches[0].clientY}});$(document).on("touchmove",function(e){if(pullStartY>0){pullMoveY=e.originalEvent.touches[0].clientY;const pullDistance=pullMoveY-pullStartY;if(pullDistance>0&&pullDistance<pullThreshold*2){$refreshIndicator.css({"transform":`translateY(${pullDistance}px)`,"opacity":pullDistance/pullThreshold});if(pullDistance>pullThreshold){$refreshIndicator.addClass("mt-pull-ready")}else{$refreshIndicator.removeClass("mt-pull-ready")}}}});$(document).on("touchend",function(){if(pullStartY>0){const pullDistance=pullMoveY-pullStartY;if(pullDistance>pullThreshold){$refreshIndicator.addClass("mt-refreshing");location.reload()}else{$refreshIndicator.css({"transform":"translateY(0)","opacity":"0"}).removeClass("mt-pull-ready")}pullStartY=0;pullMoveY=0}})}function enhanceMobileFilters(){const $filters=$(".mt-search-filters");if($filters.length===0)return;if($(window).width()<768){const $toggleBtn=$('<button class="mt-filter-toggle">'+'<span class="dashicons dashicons-filter"></span> '+mt_frontend.i18n.filter_candidates+"</button>");$filters.before($toggleBtn);$filters.addClass("mt-filters-collapsed");$toggleBtn.on("click",function(){$filters.toggleClass("mt-filters-collapsed mt-filters-expanded");$(this).toggleClass("active");if($filters.hasClass("mt-filters-expanded")){$(this).html('<span class="dashicons dashicons-no-alt"></span> '+mt_frontend.i18n.hide_filters)}else{$(this).html('<span class="dashicons dashicons-filter"></span> '+mt_frontend.i18n.filter_candidates)}})}const $clearBtn=$('<button class="mt-clear-filters">'+mt_frontend.i18n.clear_filters+"</button>");$(".mt-search-box").append($clearBtn);$clearBtn.on("click",function(){$("#mt-candidate-search").val("");$("#mt-status-filter").val("");$("#mt-category-filter").val("all");$("#mt-candidate-search").trigger("input")})}function fixIOSInputZoom(){const $inputs=$('input[type="text"], input[type="number"], select, textarea');$inputs.each(function(){const $input=$(this);const fontSize=parseInt($input.css("font-size"));if(fontSize<16){$input.css("font-size","16px")}})}function initLazyLoading(){const images=document.querySelectorAll("img[data-src]");if("IntersectionObserver"in window){const imageObserver=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){if(entry.isIntersecting){const img=entry.target;img.src=img.dataset.src;img.removeAttribute("data-src");imageObserver.unobserve(img)}})});images.forEach(function(img){imageObserver.observe(img)})}else{images.forEach(function(img){img.src=img.dataset.src;img.removeAttribute("data-src")})}}function initSmoothScroll(){$('a[href^="#"]').on("click",function(e){const target=$(this.getAttribute("href"));if(target.length){e.preventDefault();$("html, body").animate({scrollTop:target.offset().top-60},500)}})}function debounce(func,wait){let timeout;return function executedFunction(...args){const later=()=>{clearTimeout(timeout);func(...args)};clearTimeout(timeout);timeout=setTimeout(later,wait)}}function optimizeScrollPerformance(){let ticking=false;function updateScrollPosition(){if($(window).scrollTop()>100){$(".mt-dashboard-header").addClass("mt-header-compact")}else{$(".mt-dashboard-header").removeClass("mt-header-compact")}ticking=false}function requestTick(){if(!ticking){window.requestAnimationFrame(updateScrollPosition);ticking=true}}$(window).on("scroll",requestTick)}function handleOrientationChange(){setViewportHeight();optimizeTableScroll();if($(window).width()>=768){$(".mt-search-filters").removeClass("mt-filters-collapsed mt-filters-expanded");$(".mt-filter-toggle").hide()}else{$(".mt-filter-toggle").show()}}function monitorPerformance(){if("performance"in window&&"measure"in window.performance){$(".mt-evaluate-btn").on("click",function(){performance.mark("evaluate-btn-click")});window.addEventListener("load",function(){const perfData=window.performance.timing;const loadTime=perfData.loadEventEnd-perfData.navigationStart;console.log("Page load time:",loadTime+"ms")})}}$(document).ready(function(){console.log("MT Mobile Dashboard - Initializing");initMobileFeatures();optimizeScrollPerformance();$(window).on("orientationchange",debounce(handleOrientationChange,250));monitorPerformance();setTimeout(function(){$(".mt-jury-dashboard").addClass("mt-loaded")},100);console.log("MT Mobile Dashboard - Initialized")})}(jQuery);